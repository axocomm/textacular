#!/bin/bash

usage() {
    cat <<eof
Usage: `basename $0` [output path] [source file]
eof

    exit 1
}

[ $# -eq 2 ] || usage

if [ -x "/usr/bin/latexmk" ]; then
    PREFIX=/usr/bin
elif [ -x "/usr/texbin/latexmk" ]; then
    PREFIX=/usr/texbin
else
    echo 'latexmk not found' >&2
    exit 1
fi

path="$1"
src="$2"

$PREFIX/latexmk -gg -pdf -pdflatex="$PREFIX/pdflatex -interaction=nonstopmode" -jobname=$path $src

exit $?
